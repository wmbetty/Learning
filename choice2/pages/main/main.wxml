<!--pages/maintests/maintests.wxml-->
<import src="../../components/tabBar/tabBar.wxml"/>
<view class="m-container">
  <view>
      <view class="card_wrap">
        <view bindtouchstart="touchstart" bindtouchend="touchend" animation="{{animationData[index]}}" style="z-index:{{-index}};height:{{viewHeight-150}}px;" class="card_item" wx:for="{{ questionList }}" data-index="{{index}}" data-item="{{item}}"  wx:key="unique" wx:for-item="item">
        <!-- 头像部分 -->
            <view class="main-head">
                <view class="left-item">
                    <view class="avatar-box">
                    <image src="{{(item.member&&item.member.avatar)?item.member.avatar:'../../images/avatarDefault.png'}}" data-mid="{{item.mid*1}}" class="m-avatar" catchtouchend="gotoOthers"></image>
                    </view>                     
                    <view class="user-infos">
                        <view class="infos-head">{{(item.member&&item.member.nickname)?item.member.nickname:'选小象'}}</view>
                        <view wx:if="{{item.member&&item.member.gender}}" class="{{item.member.gender*1===1?'gender-box gender-boy':'gender-box gender-girl'}}"></view>
                    </view>                   
                        </view>
                        <view class="right-item">
                            <view class="r-share-btn" data-question="{{item}}" catchtouchend="goShare"></view>
                        </view>
                    </view>
                <!-- 问题部分 -->
                <view class="question-box">{{item.question}}</view>
                <view class="main-totals">
                    <text class="hot-icon"></text>
                    <text>{{item.hots}}</text>
                </view>
                <!-- 选项部分 -->
                <view class="choose-box">
                    <view class="choose-item-box"  bindtap="gotoVote" data-direct="left" data-index="{{index}}" data-item="{{item}}">
                        <view>{{item.option1}}</view>
                        <view wx:if="{{item.showMask}}" class="vote-mask">
                            <view class="{{item.choose_left?'vote-selected':''}}">{{item.choose1_per>100?50:item.choose1_per}}%</view>
                        </view>
                        
                    </view>
                    <view class="choose-item-box" bindtap="gotoVote" data-direct="right" data-index="{{index}}" data-item="{{item}}">
                        <view>{{item.option2}}</view>
                        <view wx:if="{{item.showMask}}" class="vote-mask">
                            <view class="{{item.choose_right?'vote-selected':''}}">{{item.choose2_per>100?50:item.choose2_per}}%</view>
                        </view>
                    </view>
                    
                </view>
            </view>
  </view>

  <view></view>
    
</view>

<view class="share-mask" style="height: {{viewHeight}}px;" wx:if="{{showShare}}">
        <view class="share-btn-container">
            <view class="wechat-container" wx:if="{{showShare}}">
                <button class="wechat-item-box" open-type="share" hover-stop-propagation="true" catchtap="shareToFriends">
                    <image src="../../images/wechat_icon.png" class="wechat-icon"/>
                    <view class="wechat-text">微信好友分享</view>
                </button>
                <view wx:if="{{showShare}}" class="wechat-item-box" hover-stop-propagation="true" catchtap="shareToMoment">
                    <image src="../../images/moment_icon.png" class="wechat-icon moment-icon"/>
                    <view class="wechat-text">生成朋友圈海报</view>
                </view>
            </view>
            <view class="cancel-btn" catchtap="cancelShare">取消</view>
        </view>
    </view>

<dialog-wxml dialog-show="{{showDialog}}" bind:cancelDialog="cancelDialog" bind:confirmDialog="confirmDialog"></dialog-wxml>
<view wx:if="{{isEmpty}}" class="main-empty-cont">
    <empty-wxml empty-info="小纠结被刷光了" show-blue="{{isEmpty}}" blue-text="点击底部“+”发起我的选象"></empty-wxml>
</view>
<view wx:if="{{!isEmpty}}" class="up-text-box" style="top:{{viewHeight-98}}px;">
                    <text>滑动卡片切换</text>
                    <text class="up-icon"></text>
                </view>
  </view>
  <view class='imagePathBox' bindtap="closePoster" hidden="{{maskHidden == false}}">
      <image src="{{imagePath}}" class='shengcheng'></image>
      <view class="shengcheng poster-view" wx:show="{{showPosterView}}" catchtap="showMaskHidden">
          <image src="../../images/posterBg.png" class="poster-banner" style="height:{{viewWidth*0.33}}px;"></image>
          <image src="{{avatar}}" class="poster-avatar"></image>
          <view class="poster-text">{{question}}</view>
          <view class="poster-botom-text">长按识别小程序 表达你的观点哟</view>
          <image src="../../images/posterArrow.png" class="poster-arrow"></image>
          <image src="{{qrcodeImg}}" class="poster-code"></image>
      </view>
      <button class='baocun' bindtap='saveImageToPhotosAlbum'>保存海报</button>
    </view>
   <view hidden="{{maskHidden == false}}" class="mask"></view> 
  <view class="canvas-box">
      <canvas  style="width: 375px;height: 667px;position:fixed;top:9999px" canvas-id="mycanvas"/>
  </view>

  <!-- 加积分提示 -->
<view class="gc-toast" wx:if="{{showScore}}">
    <view class="toast-cont">
        <image src="../../images/gold_coin.png" class="smile-icon" />
        <image src="../../images/score.png" class="score-icon" />
    </view>
    <view class="toast-info">保存成功</view>
</view>

<template is="tabBar" data="{{tabBar:bindData.tabBar, msgCount,voteUnreadCount}}"/>

