<!--index.wxml-->
<!-- <import src="../../components/tabBar/tabBar.wxml"/> -->

<view wx:if="{{hasUserInfo}}" data-txt="title">
    <view class="title-box">
        <!-- <view class="title-txt-view" wx:if="{{!showTextarea}}" bindtap="txtFocus">点击输入标题</view> -->
        <!-- {{showTextarea?'title-textarea textarea-has-text':'title-textarea'}} -->
        <textarea class="{{showTextarea?'title-textarea textarea-has-text':'title-textarea'}}" auto-focus="{{titleFocus}}" maxlength="32" data-direct="title" bindinput="titlePut" value="{{titleText}}" bindfocus="textFocus" bindtap="textTap" bindblur="textBlur" placeholder-class="{{showTextarea?'text-holder-white':'text-holder'}}" />
    </view>
    <view class="pub-cont">
        <view class="pub-cont-box" data-txt="left" bindtouchend="textFocus">
            <textarea class="{{showLeft?'cont-textarea':'cont-holder'}}" maxlength="20" data-direct="left" bindinput="titlePut" bindfocus="contFocus" bindtap="textTap" bindblur="textBlur" value="{{leftHolder}}" />
        </view>
        <view class="pub-cont-box" data-txt="right" bindtouchend="textFocus">
            <textarea class="{{showRight?'cont-textarea':'cont-holder'}}" maxlength="20" data-direct="right" bindinput="titlePut" bindfocus="contFocus" bindtap="textTap" bindblur="textBlur" value="{{rightHolder}}" />
            <!-- textarea -->
        </view>
    </view>
    <button class="{{isPublish?'publish-btn publish-btn-active':'publish-btn'}}" disabled="{{btnDis}}" bindtap="goPublish">发布</button>
</view>
<!-- 加积分提示 -->
<view class="gc-toast" wx:if="{{showToast}}">
    <view class="toast-cont">
        <image src="../../images/gold_coin.png" class="smile-icon" />
        <image src="../../images/score.png" class="score-icon" />
    </view>
    <view class="toast-info">发布成功</view>
</view>

<!-- 分享弹窗 -->
<view class="share-mask" style="height: {{winHeight}}px;}}" wx:if="{{isShare}}">
    <view class="share-toast">
        <view class="share-toast-head">
            <image class="share-close" src="../../images/close.png" bindtap="cancelShare"/>
        </view>
        <view class="share-infos">好友助攻 迎刃而解</view>
        <view class="share-content">
            <view>{{shareTitle}}</view>
            <view class="triangle-down"></view>
        </view>
        <view class="share-btn-box">
            <image src="../../images/moment_icon.png" class="share-btn" bindtap="shareTomoment" />
            <view class="btn-splie-line"></view>
            <button class="share-btn-default" open-type="share" bindtap="shareToFriend">
                <image src="../../images/wechat_icon.png" class="share-btn"/>
            </button>
            
        </view>
    </view>
</view>

<view class='imagePathBox' bindtap="closePoster" hidden="{{maskHidden == false}}">
      <image src="{{imagePath}}" class='shengcheng'></image>
      <view class="shengcheng poster-view" wx:show="{{showPosterView}}" catchtap="showMaskHidden">
          <image src="../../images/posterBg.png" class="poster-banner" style="height:{{viewWidth*0.33}}px;"></image>
          <image src="{{uavatar}}" class="poster-avatar"></image>
          <view class="poster-text">{{shareTitle}}</view>
          <view class="poster-botom-text">长按识别小程序 表达你的观点哟</view>
          <image src="../../images/posterArrow.png" class="poster-arrow"></image>
          <image src="{{qrcodeImg}}" class="poster-code"></image>
      </view>
      <button class='baocun' bindtap='saveImageToPhotosAlbum'>保存海报</button>
    </view> 
  <view class="canvas-box">
      <canvas  style="width: 375px;height: 667px;position:fixed;top:9999px" canvas-id="mycanvas"/>
  </view>


<!-- 授权弹窗 -->
<dialog-wxml dialog-show="{{showDialog}}" bind:cancelDialog="cancelDialog" bind:confirmDialog="confirmDialog"></dialog-wxml>